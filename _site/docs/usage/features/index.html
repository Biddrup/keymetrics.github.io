<!DOCTYPE html>
<html lang="en"  class="no-js">

<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Features</title>
  <meta name="description" content="Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
">

  <link rel="stylesheet" href="/pm2/css/main.css">
  <link rel="canonical" href="http://keymetrics.github.io/pm2/docs/usage/features/">
  <link rel="alternate" type="application/rss+xml" title="pm2.io" href="http://keymetrics.github.io/pm2/feed.xml" />
  <script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.1/js/bootstrap.min.js"></script>
  <script src="//cdnjs.cloudflare.com/ajax/libs/lodash.js/2.4.1/lodash.min.js"></script>
</head>


<body>

<nav id="header" class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <a class="navbar-brand logo" href="/pm2/"></a>
    </div>
    <div id="navigation" class="collapse navbar-collapse">
      <ul class="nav navbar-nav">
        
          
            <li class="dropdown active">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Usage <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                <li >
                  <a href="/pm2/docs/usage/quick-start/">Quick start</a>
                </li>
                
                <li  class="active">
                  <a href="/pm2/docs/usage/features/">Features</a>
                </li>
                
                <li >
                  <a href="/pm2/docs/usage/deployment/">Deployment</a>
                </li>
                
                <li >
                  <a href="/pm2/docs/usage/pm2-progra-and-specific/">PM2 programmatically and Specific</a>
                </li>
                
                <li >
                  <a href="/pm2/docs/usage/knowledge/">Knowledge</a>
                </li>
                
              </ul>
            </li>
          
        
          
            <li class="dropdown ">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Advanced <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                <li >
                  <a href="/pm2/docs/advanced/modules/">Modules</a>
                </li>
                
              </ul>
            </li>
          
        
          
            <li  >
              <a href="/pm2/docs/faq/">FAQ</a>
            </li>
          
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a class="btn-monit" target="_blank" href="https://app.keymetrics.io/"><button class="btn btn-info" type="button">Monit PM2</button></a></li>
        <li >
          <a href="/pm2/blog/">Blog</a>
        </li>
        <li>
          <a class="logo-git" href="https://github.com/Unitech/PM2"></a>
        </li>
      </ul>
    </div>
  </div>
</nav>






<div class="header-title">
  <div class="container">
    <div class="row">
      <div class="col-md-12">
        <h1>Features</h1>
      </div>
    </div>
  </div>
</div>

<div class="container">
  <div class="row">
    <div class="container">
  <div class="row">
    <div class="col-md-9 docs-content">
      <h2>Managing applications states</h2>

<p>PM2 is a process manager.
It manages your applications states, so you can start, stop, restart and <em>delete</em> processes.</p>

<p>Start a process:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 start app.js --name <span class="s2">&quot;my-api&quot;</span>
<span class="nv">$ </span>pm2 start web.js --name <span class="s2">&quot;web-interface&quot;</span>
</code></pre></div>
<p>Now let&#39;s say I need to stop the web-interface:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 stop web-interface
</code></pre></div>
<p>As you can see <strong>the process hasn&#39;t disappeared</strong>. It&#39;s still there but in <code>stopped</code> status.</p>

<p>To restart it just do:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 restart web-interface
</code></pre></div>
<p>Now I want to <strong>delete</strong> the app from the PM2 process list.
To do so:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 delete web-interface
</code></pre></div>
<h2>Process listing</h2>

<p>To list all running processes:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 list
<span class="c"># Or</span>
<span class="nv">$ </span>pm2 <span class="o">[</span>list<span class="p">|</span>ls<span class="p">|</span>l<span class="p">|</span>status<span class="o">]</span>
</code></pre></div>
<p>To get more details about a specific process:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 show 0
</code></pre></div>
<h2>Monitoring CPU/Memory</h2>

<p>PM2 gives you a simple way to monitor the resource usage of your application.
You can monitor memory and cpu very easily, straight from your terminal:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 monit
</code></pre></div>
<p>Please note that <a href="https://keymetrics.io">Keymetrics</a> allows to monitor applications much better, from errors, performances, vital signs and much more.</p>

<h2>Clustering (cluster_mode)</h2>

<p>The <strong>cluster mode</strong> allows to scale your Node.js application accross all CPUs available and to update them without any downtime!</p>

<p>It&#39;s perfectly fitted for networked applications handling HTTP(s)/UDP/TCP connections.</p>

<p>To enable the <strong>cluster mode</strong>, just pass the -i <instances> option:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 start app.js -i 1
</code></pre></div>
<p>You can pass multiple values to the instances (-i) option:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text"># Start the maximum processes depending on available CPUs
$ pm2 start app.js -i 0

# Start the maximum processes -1 depending on available CPUs
$ pm2 start app.js -i -1

# Start 3 processes
$ pm2 start app.js -i 3
</code></pre></div>
<h3>Considerations</h3>

<ul>
<li>You don&#39;t need to modify anything from you code to be able to use this nifty feature.</li>
<li>In your application the environment variable <code>NODE_APP_INSTANCE</code> is exposed so you can listen for different port if needed. (e.g .listen(8000 + process.env.NODE_APP_INSTANCE))</li>
<li>Be sure your <strong>application is stateless</strong> meaning that there is not any local data stored in the process, like sessions/websocket connections etc. Use Redis, Mongo or other DB to share states between processes</li>
</ul>

<h3>Hot reload / 0s reload</h3>

<p>As opposed to <code>restart</code>, which kills and restarts the process, <code>reload</code> achieves a 0-second-downtime reload.</p>

<p><strong>Warning</strong> This feature only works for apps in <strong>cluster mode</strong>, that uses HTTP/HTTPS/Socket connections.</p>

<p>To reload an app:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 reload api
</code></pre></div>
<p>If the reload system hasn&#39;t managed to reload your app, a timeout will fallback to a classic restart.</p>

<h3>Graceful reload</h3>

<p>Sometimes you can experience a <strong>very long reload, or a reload that doesn&#39;t work</strong> (fallback to restart) meaning that your app still has open connections on exit.
Or you may need to close all databases connections, clear a data queue or whatever.</p>

<p>To work around this problem you have to <strong>use the graceful reload</strong>.</p>

<p>Graceful reload is a mechanism that will send a <strong>shutdown</strong> message to your process before reloading it.
You can control the time that the app has to shutdown via the <code>PM2_GRACEFUL_TIMEOUT</code> environment variable.</p>

<p>Example:</p>
<div class="highlight"><pre><code class="language-javascript" data-lang="javascript"><span class="nx">process</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">&#39;message&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">msg</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="nx">msg</span> <span class="o">==</span> <span class="s1">&#39;shutdown&#39;</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Your process is going to be reloaded</span>
    <span class="c1">// You have to close all database/socket.io/* connections</span>

    <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Closing all connections...&#39;</span><span class="p">);</span>

    <span class="c1">// You will have 4000ms to close all connections before</span>
    <span class="c1">// the reload mechanism will try to do its job</span>

    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;Finished closing connections&#39;</span><span class="p">);</span>
      <span class="c1">// This timeout means that all connections have been closed</span>
      <span class="c1">// Now we can exit to let the reload mechanism do its job</span>
      <span class="nx">process</span><span class="p">.</span><span class="nx">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">1500</span><span class="p">);</span>
  <span class="p">}</span>
<span class="p">});</span>
</code></pre></div>
<p>Then use the command:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 gracefulReload <span class="o">[</span>all<span class="p">|</span>name<span class="o">]</span>
</code></pre></div>
<p>When PM2 starts a new process to replace an old one, it will wait for the new process to begin listening to a connection or a timeout before sending the shutdown message to the old one. You can define the timeout value with the <code>PM2_GRACEFUL_LISTEN_TIMEOUT</code> environament variable. If a script does not need to listen to a connection, it can manually tell PM2 that the process has started up by calling <code>process.send(&#39;online&#39;)</code>.</p>

<h2>Logs management</h2>

<p>PM2 allows you to manage logs easily. You can display all application logs in real-time, flush them, and reload them.
There are also different ways to configure how PM2 will handle your logs (separated in different files, merged, with timestamp...) without modifying anything in your code.</p>

<h3>Displaying logs in real-time</h3>

<p>Displaying logs of a specified process or of all processes in real-time:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 logs
<span class="nv">$ </span>pm2 logs big-api
</code></pre></div>
<h3>Flushing logs</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 flush <span class="c"># Clear all the logs</span>
</code></pre></div>
<p>You can configure a Cron Job to call this command every X days.
Or you can install Log rotate to handle the log rotation.</p>

<h3>Reloading all logs</h3>

<p>Reloading logs is specially usefull for Logrotate or any other rotating log system.</p>

<p>You can reload logs by sending <code>SIGUSR2</code> to the PM2 process.</p>

<p>You can also reload all logs via the command line with:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 reloadLogs
</code></pre></div>
<h3>Configuring logs</h3>

<h4>CLI</h4>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 start echo.js --merge-logs --log-date-format<span class="o">=</span><span class="s2">&quot;YYYY-MM-DD HH:mm Z&quot;</span>
</code></pre></div>
<p>Options:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash">--merge-logs                 <span class="k">do</span> not postfix log file with process id
--log-date-format &lt;format&gt;   prefix logs with formated timestamp
-l --log <span class="o">[</span>path<span class="o">]</span>              specify entire log file <span class="o">(</span>error and out are both included<span class="o">)</span>
-o --output &lt;path&gt;           specify out log file
-e --error &lt;path&gt;            specify error log file
</code></pre></div>
<h3>JSON / Programmatic</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">{
  &quot;script&quot;          : &quot;echo.js&quot;,
  &quot;error_file&quot;        : &quot;err.log&quot;,
  &quot;out_file&quot;        : &quot;out.log&quot;,
  &quot;merge_logs&quot;      : true,
  &quot;log_date_format&quot; : &quot;YYYY-MM-DD HH:mm Z&quot;
}
</code></pre></div>
<p><strong>Note</strong>: To merge all logs into the same file set the same value for <code>error_file</code>, <code>out_file</code>.</p>

<h2>Max Memory Restart</h2>

<p>PM2 allows to restart an application based on a memory limit.</p>

<h3>CLI</h3>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 start big-array.js --max-memory-restart 20M
</code></pre></div>
<h3>JSON</h3>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span>   <span class="p">:</span> <span class="s2">&quot;max_mem&quot;</span><span class="p">,</span>
  <span class="nt">&quot;script&quot;</span> <span class="p">:</span> <span class="s2">&quot;big-array.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;max_memory_restart&quot;</span> <span class="p">:</span> <span class="s2">&quot;20M&quot;</span>
<span class="p">}</span>
</code></pre></div>
<h3>Programmatic</h3>
<div class="highlight"><pre><code class="language-text" data-lang="text">pm2.start({
  name               : &quot;max_mem&quot;,
  script             : &quot;big-array.js&quot;,
  max_memory_restart : &quot;20M&quot;
}, function(err, proc) {
  // Processing
});
</code></pre></div>
<h3>Units</h3>

<p>Units can be K(ilobyte), M(egabyte), G(igabyte).</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">50M
50K
1G
</code></pre></div>
<h2>Startup script</h2>

<p>PM2 can <strong>generate startup scripts and configure them</strong>.
PM2 is also smart enough to <strong>save all your process list</strong> and to <strong>bring back all your processes at machine restart</strong>.</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 startup
<span class="c"># auto-detect platform</span>
<span class="nv">$ </span>pm2 startup <span class="o">[</span>platform<span class="o">]</span>
<span class="c"># render startup-script for a specific platform, the [platform] could be one of:</span>
<span class="c">#   ubuntu|centos|redhat|gentoo|systemd|darwin|amazon</span>
</code></pre></div>
<p>Once you have started the apps and want to keep them on server reboot do:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 save
</code></pre></div>
<p><strong>Warning</strong> It&#39;s tricky to make this feature work generically, so once PM2 has setup your startup script, reboot your server to make sure that PM2 has launched your apps!</p>

<h3>Startup Systems support</h3>

<p>Three types of startup scripts are available:</p>

<ul>
<li>SystemV init script (with the option <code>ubuntu</code> or <code>centos</code>)</li>
<li>OpenRC init script (with the option <code>gentoo</code>)</li>
<li>SystemD init script (with the <code>systemd</code> option)</li>
</ul>

<p>The startup options are using:</p>

<ul>
<li><strong>ubuntu</strong> will use <code>updaterc.d</code> and the script <code>lib/scripts/pm2-init.sh</code></li>
<li><strong>centos</strong>/<strong>redhat</strong> will use <code>chkconfig</code> and the script <code>lib/scripts/pm2-init-centos.sh</code></li>
<li><strong>gentoo</strong> will use <code>rc-update</code> and the script <code>lib/scripts/pm2</code></li>
<li><strong>systemd</strong> will use <code>systemctl</code> and the script <code>lib/scripts/pm2.service</code></li>
<li><strong>darwin</strong> will use <code>launchd</code> to load a specific <code>plist</code> to resurrect processes after reboot.</li>
</ul>

<h3>User permissions</h3>

<p>Let&#39;s say you want the startup script to be executed under another user.</p>

<p>Just use the <code>-u &lt;username&gt;</code> option !</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 startup ubuntu -u www
</code></pre></div>
<h3>Related commands</h3>

<p>Dump all processes status and environment managed by PM2:
<code>bash
$ pm2 dump
</code>
It populates the file <code>~/.pm2/dump.pm2</code> by default.</p>

<p>To bring back the latest dump:
<code>bash
$ pm2 [resurrect|save]
</code></p>

<h2>Watch &amp; Restart</h2>

<p>PM2 can automatically restart your app when a file changes in the current directory or its subdirectories:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$ </span>pm2 start app.js --watch
</code></pre></div>
<p>If <code>--watch</code> is enabled, stopping it won&#39;t stop watching:
- <code>pm2 stop 0</code> will not stop watching
- <code>pm2 stop --watch 0</code> will stop watching</p>

<p>Restart toggle the <code>watch</code> parameter when triggered.</p>

<p>To watch specific paths, please use a JSON app declaration, <code>watch</code> can take a string or an array of paths. Default is <code>true</code>:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;watch&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;server&quot;</span><span class="p">,</span> <span class="s2">&quot;client&quot;</span><span class="p">],</span>
  <span class="nt">&quot;ignore_watch&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;node_modules&quot;</span><span class="p">,</span> <span class="s2">&quot;client/img&quot;</span><span class="p">],</span>
  <span class="nt">&quot;watch_options&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;followSymlinks&quot;</span><span class="p">:</span> <span class="kc">false</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>As specified in the <a href="#a988">Schema</a>:
- <code>watch</code> can be a boolean, an array of paths or a string representing a path. Default to <code>false</code>
- <code>ignore_watch</code> can be an array of paths or a string, it&#39;ll be interpreted by <a href="https://github.com/paulmillr/chokidar#path-filtering">chokidar</a> as a glob or a regular expression.
- <code>watch_options</code> is an object that will replace options given to chokidar. Please refer to <a href="https://github.com/paulmillr/chokidar#api">chokidar documentation</a> for the definition.</p>

<p>PM2 is giving chokidar these Default options:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">var watch_options = {
  persistent    : true,
  ignoreInitial : true
}
</code></pre></div>
<h2>JSON app declaration</h2>

<p>PM2 empowers your process management workflow, by allowing you to fine-tune the behavior, options, environment variables, logs files... of each process you need to manage via JSON configuration.</p>

<p>It&#39;s particularly usefull for micro service based applications.</p>

<p>You can define parameters for your apps in a JSON file:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;apps&quot;</span> <span class="p">:</span> <span class="p">[{</span>
    <span class="nt">&quot;name&quot;</span>        <span class="p">:</span> <span class="s2">&quot;worker-app&quot;</span><span class="p">,</span>
    <span class="nt">&quot;script&quot;</span>      <span class="p">:</span> <span class="s2">&quot;worker.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;args&quot;</span>        <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--toto=heya coco&quot;</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">],</span>
    <span class="nt">&quot;watch&quot;</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;node_args&quot;</span>   <span class="p">:</span> <span class="s2">&quot;--harmony&quot;</span><span class="p">,</span>
    <span class="nt">&quot;merge_logs&quot;</span>  <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="nt">&quot;cwd&quot;</span>         <span class="p">:</span> <span class="s2">&quot;/this/is/a/path/to/start/script&quot;</span><span class="p">,</span>
    <span class="nt">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="nt">&quot;NODE_ENV&quot;</span><span class="p">:</span> <span class="s2">&quot;production&quot;</span><span class="p">,</span>
        <span class="nt">&quot;AWESOME_SERVICE_API_TOKEN&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span>
    <span class="p">}</span>
  <span class="p">},{</span>
    <span class="nt">&quot;name&quot;</span>       <span class="p">:</span> <span class="s2">&quot;api-app&quot;</span><span class="p">,</span>
    <span class="nt">&quot;script&quot;</span>     <span class="p">:</span> <span class="s2">&quot;api.js&quot;</span><span class="p">,</span>
    <span class="nt">&quot;instances&quot;</span>  <span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
    <span class="nt">&quot;exec_mode&quot;</span>  <span class="p">:</span> <span class="s2">&quot;cluster_mode&quot;</span><span class="p">,</span>
    <span class="nt">&quot;error_file&quot;</span> <span class="p">:</span> <span class="s2">&quot;./examples/child-err.log&quot;</span><span class="p">,</span>
    <span class="nt">&quot;out_file&quot;</span>   <span class="p">:</span> <span class="s2">&quot;./examples/child-out.log&quot;</span><span class="p">,</span>
    <span class="nt">&quot;pid_file&quot;</span>   <span class="p">:</span> <span class="s2">&quot;./examples/child.pid&quot;</span>
  <span class="p">}]</span>
<span class="p">}</span>
</code></pre></div>
<p>Then you can run:</p>
<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="c"># Start all apps</span>
<span class="nv">$ </span>pm2 start processes.json

<span class="c"># Stop</span>
<span class="nv">$ </span>pm2 stop processes.json

<span class="c"># Delete from PM2</span>
<span class="nv">$ </span>pm2 delete processes.json

<span class="c"># Restart all</span>
<span class="nv">$ </span>pm2 restart processes.json
</code></pre></div>
<h3>Options</h3>

<p>The following are valid options for JSON app declarations:</p>
<div class="highlight"><pre><code class="language-json" data-lang="json"><span class="p">{</span>
  <span class="nt">&quot;name&quot;</span>             <span class="p">:</span> <span class="s2">&quot;node-app&quot;</span><span class="p">,</span>
  <span class="nt">&quot;cwd&quot;</span>              <span class="p">:</span> <span class="s2">&quot;/srv/node-app/current&quot;</span><span class="p">,</span>
  <span class="nt">&quot;args&quot;</span>             <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--toto=heya coco&quot;</span><span class="p">,</span> <span class="s2">&quot;-d&quot;</span><span class="p">,</span> <span class="s2">&quot;1&quot;</span><span class="p">],</span>
  <span class="nt">&quot;script&quot;</span>           <span class="p">:</span> <span class="s2">&quot;bin/app.js&quot;</span><span class="p">,</span>
  <span class="nt">&quot;node_args&quot;</span>        <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;--harmony&quot;</span><span class="p">,</span> <span class="s2">&quot; --max-stack-size=102400000&quot;</span><span class="p">],</span>
  <span class="nt">&quot;log_date_format&quot;</span>  <span class="p">:</span> <span class="s2">&quot;YYYY-MM-DD HH:mm Z&quot;</span><span class="p">,</span>
  <span class="nt">&quot;error_file&quot;</span>       <span class="p">:</span> <span class="s2">&quot;/var/log/node-app/node-app.stderr.log&quot;</span><span class="p">,</span>
  <span class="nt">&quot;out_file&quot;</span>         <span class="p">:</span> <span class="s2">&quot;log/node-app.stdout.log&quot;</span><span class="p">,</span>
  <span class="nt">&quot;pid_file&quot;</span>         <span class="p">:</span> <span class="s2">&quot;pids/node-geo-api.pid&quot;</span><span class="p">,</span>
  <span class="nt">&quot;instances&quot;</span>        <span class="p">:</span> <span class="mi">6</span><span class="p">,</span> <span class="err">//or</span> <span class="err">0</span> <span class="err">=&gt;</span> <span class="err">&#39;max&#39;</span>
  <span class="nt">&quot;min_uptime&quot;</span>       <span class="p">:</span> <span class="s2">&quot;200s&quot;</span><span class="p">,</span> <span class="err">//</span> <span class="err">200</span> <span class="err">seconds,</span> <span class="err">defaults</span> <span class="err">to</span> <span class="err">1000</span>
  <span class="nt">&quot;max_restarts&quot;</span>     <span class="p">:</span> <span class="mi">10</span><span class="p">,</span> <span class="err">//</span> <span class="err">defaults</span> <span class="err">to</span> <span class="err">15</span>
  <span class="nt">&quot;max_memory_restart&quot;</span><span class="p">:</span> <span class="s2">&quot;1M&quot;</span><span class="p">,</span> <span class="err">//</span> <span class="err">1</span> <span class="err">megabytes,</span> <span class="err">e.g.:</span> <span class="nt">&quot;2G&quot;</span><span class="p">,</span> <span class="nt">&quot;10M&quot;</span><span class="p">,</span> <span class="nt">&quot;100K&quot;</span><span class="p">,</span> <span class="err">1024</span> <span class="err">the</span> <span class="err">default</span> <span class="err">unit</span> <span class="err">is</span> <span class="err">byte.</span>
  <span class="nt">&quot;cron_restart&quot;</span>     <span class="p">:</span> <span class="s2">&quot;1 0 * * *&quot;</span><span class="p">,</span>
  <span class="nt">&quot;watch&quot;</span>            <span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
  <span class="nt">&quot;ignore_watch&quot;</span>      <span class="p">:</span> <span class="p">[</span><span class="s2">&quot;[\\/\\\\]\\./&quot;</span><span class="p">,</span> <span class="s2">&quot;node_modules&quot;</span><span class="p">],</span>
  <span class="nt">&quot;merge_logs&quot;</span>       <span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
  <span class="nt">&quot;exec_interpreter&quot;</span> <span class="p">:</span> <span class="s2">&quot;node&quot;</span><span class="p">,</span>
  <span class="nt">&quot;exec_mode&quot;</span>        <span class="p">:</span> <span class="s2">&quot;fork&quot;</span><span class="p">,</span>
  <span class="nt">&quot;autorestart&quot;</span>      <span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="err">//</span> <span class="err">enable/disable</span> <span class="err">automatic</span> <span class="err">restart</span> <span class="err">when</span> <span class="err">an</span> <span class="err">app</span> <span class="err">crashes</span> <span class="err">or</span> <span class="err">exits</span>
  <span class="nt">&quot;vizion&quot;</span>           <span class="p">:</span> <span class="kc">false</span><span class="p">,</span> <span class="err">//</span> <span class="err">enable/disable</span> <span class="err">vizion</span> <span class="err">features</span> <span class="err">(versioning</span> <span class="err">control)</span>
  <span class="nt">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;NODE_ENV&quot;</span><span class="p">:</span> <span class="s2">&quot;production&quot;</span><span class="p">,</span>
    <span class="nt">&quot;AWESOME_SERVICE_API_TOKEN&quot;</span><span class="p">:</span> <span class="s2">&quot;xxx&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3>List of all JSON-declaration fields avaibles</h3>

<table><thead>
<tr>
<th style="text-align: center">Field</th>
<th style="text-align: center">Type</th>
<th style="text-align: center">Example</th>
<th style="text-align: center">Description</th>
</tr>
</thead><tbody>
<tr>
<td style="text-align: center">name</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;myAPI&quot;</td>
<td style="text-align: center">name your app will have in PM2</td>
</tr>
<tr>
<td style="text-align: center">script</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;bin/app.js&quot;</td>
<td style="text-align: center">path of your app</td>
</tr>
<tr>
<td style="text-align: center">args</td>
<td style="text-align: center">list</td>
<td style="text-align: center">[&quot;--enable-logs&quot;, &quot;-n&quot;, &quot;15&quot;]</td>
<td style="text-align: center">arguments given to your app when it is launched</td>
</tr>
<tr>
<td style="text-align: center">node_args</td>
<td style="text-align: center">list</td>
<td style="text-align: center">[&quot;--harmony&quot;, &quot;--max-stack-size=1024&quot;]</td>
<td style="text-align: center">arguments given to node when it is launched</td>
</tr>
<tr>
<td style="text-align: center">cwd</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;/var/www/app/prod&quot;</td>
<td style="text-align: center">the directory from which your app will be launched</td>
</tr>
<tr>
<td style="text-align: center">exec_mode</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;cluster&quot;</td>
<td style="text-align: center">&quot;fork&quot; mode is used by default, &quot;cluster&quot; mode can be configured with <code>instances</code> field</td>
</tr>
<tr>
<td style="text-align: center">instances</td>
<td style="text-align: center">number</td>
<td style="text-align: center">4</td>
<td style="text-align: center">number of instances for your clustered app, <code>0</code> means as much instances as you have CPU cores. a negative value means CPU cores - value (e.g -1 on a 4 cores machine will spawn 3 instances)</td>
</tr>
<tr>
<td style="text-align: center">exec_interpreter</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;node&quot;</td>
<td style="text-align: center">defaults to &quot;node&quot;. can be &quot;python&quot;, &quot;ruby&quot;, &quot;bash&quot; or whatever interpreter you wish to use. &quot;none&quot; will execute your app as a binary executable</td>
</tr>
<tr>
<td style="text-align: center">log_date_format</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;YYYY-MM-DD HH:mm Z&quot;</td>
<td style="text-align: center">format in which timestamps will be displayed in the logs</td>
</tr>
<tr>
<td style="text-align: center">error_file</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;/var/log/node-app/node-app.stderr.log&quot;</td>
<td style="text-align: center">path to the specified error log file. PM2 generates one by default if not specified and you can find it by typing <code>pm2 desc &lt;app id&gt;</code></td>
</tr>
<tr>
<td style="text-align: center">out_file</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;/var/log/node-app/node-app.stdout.log&quot;</td>
<td style="text-align: center">path to the specified output log file. PM2 generates one by default if not specified and you can find it by typing <code>pm2 desc &lt;app id&gt;</code></td>
</tr>
<tr>
<td style="text-align: center">pid_file</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;pids/node-geo-api.pid&quot;</td>
<td style="text-align: center">path to the specified pid file. PM2 generates one by default if not specified and you can find it by typing <code>pm2 desc &lt;app id&gt;</code></td>
</tr>
<tr>
<td style="text-align: center">merge_logs</td>
<td style="text-align: center">boolean</td>
<td style="text-align: center">false</td>
<td style="text-align: center">defaults to false. if true, it will merge logs from all instances of the same app into the same file</td>
</tr>
<tr>
<td style="text-align: center">cron_restart</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;1 0 * * *&quot;</td>
<td style="text-align: center">a cron pattern to restart your app. only works in &quot;cluster&quot; mode for now. soon to be avaible in &quot;fork&quot; mode as well</td>
</tr>
<tr>
<td style="text-align: center">watch</td>
<td style="text-align: center">boolean</td>
<td style="text-align: center">true</td>
<td style="text-align: center">enables the watch feature, defaults to &quot;false&quot;. if true, it will restart your app everytime a file change is detected on the folder or subfolder of your app.</td>
</tr>
<tr>
<td style="text-align: center">ignore_watch</td>
<td style="text-align: center">list</td>
<td style="text-align: center">[&quot;[\/\\]\./&quot;, &quot;node_modules&quot;]</td>
<td style="text-align: center">list of regex to ignore some file or folder names by the watch feature</td>
</tr>
<tr>
<td style="text-align: center">max_restarts</td>
<td style="text-align: center">number</td>
<td style="text-align: center">10</td>
<td style="text-align: center">number of consecutive unstable restarts (less than 1sec interval) before your app is considered errored and stop being restarted by PM2. defaults to 15.</td>
</tr>
<tr>
<td style="text-align: center">max_memory_restart</td>
<td style="text-align: center">string</td>
<td style="text-align: center">&quot;150M&quot;</td>
<td style="text-align: center">your app will be restarted by PM2 if it exceeds the amount of memory specified. human-friendly format : it can be &quot;10M&quot;, &quot;100K&quot;, &quot;2G&quot; and so on...</td>
</tr>
<tr>
<td style="text-align: center">env</td>
<td style="text-align: center">object</td>
<td style="text-align: center">{&quot;NODE_ENV&quot;: &quot;production&quot;, &quot;ID&quot;: &quot;42&quot;}</td>
<td style="text-align: center">env variables which will appear in your app</td>
</tr>
<tr>
<td style="text-align: center">autorestart</td>
<td style="text-align: center">boolean</td>
<td style="text-align: center">false</td>
<td style="text-align: center">true by default. if false, PM2 will not restart your app if it crashes or ends peacefully</td>
</tr>
<tr>
<td style="text-align: center">vizion</td>
<td style="text-align: center">boolean</td>
<td style="text-align: center">false</td>
<td style="text-align: center">true by default. if false, PM2 will start without vizion features (versioning control metadatas)</td>
</tr>
<tr>
<td style="text-align: center">post_update</td>
<td style="text-align: center">list</td>
<td style="text-align: center">[&quot;npm install&quot;, &quot;echo launching the app&quot;]</td>
<td style="text-align: center">a list of commands which will be executed after you perform a Pull/Upgrade operation from Keymetrics dashboard</td>
</tr>
<tr>
<td style="text-align: center">force</td>
<td style="text-align: center">boolean</td>
<td style="text-align: center">true</td>
<td style="text-align: center">defaults to false. if true, you can start the same script several times which is usually not allowed by PM2</td>
</tr>
<tr>
<td style="text-align: center">next_gen_js</td>
<td style="text-align: center">boolean</td>
<td style="text-align: center">true</td>
<td style="text-align: center">defaults to false. if true, PM2 will launch your app using embedded BabelJS features which means you can run ES6/ES7 javascript code</td>
</tr>
</tbody></table>

<h3>Schema</h3>

<p>The completely definitions:</p>
<div class="highlight"><pre><code class="language-JSON" data-lang="JSON"><span class="p">{</span>
  <span class="nt">&quot;script&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;require&quot;</span><span class="p">:</span> <span class="kc">true</span>
  <span class="p">},</span>
  <span class="nt">&quot;args&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;array&quot;</span><span class="p">,</span>
      <span class="s2">&quot;string&quot;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;node_args&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;array&quot;</span><span class="p">,</span>
      <span class="s2">&quot;string&quot;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;name&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;max_memory_restart&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;string&quot;</span><span class="p">,</span>
      <span class="s2">&quot;number&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;^\\d+(G|M|K)?$&quot;</span><span class="p">,</span>
    <span class="nt">&quot;ext_type&quot;</span><span class="p">:</span> <span class="s2">&quot;sbyte&quot;</span><span class="p">,</span>
    <span class="nt">&quot;desc&quot;</span><span class="p">:</span> <span class="s2">&quot;it should be a NUMBER - byte, \&quot;[NUMBER]G\&quot;(Gigabyte), \&quot;[NUMBER]M\&quot;(Megabyte) or \&quot;[NUMBER]K\&quot;(Kilobyte)&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;instances&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">},</span>
  <span class="nt">&quot;log_file&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;boolean&quot;</span><span class="p">,</span>
      <span class="s2">&quot;string&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;log&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;error_file&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;error&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;out_file&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;output&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;pid_file&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;pid&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;cron_restart&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;cron&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;cwd&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;merge_logs&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;watch&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;ignore_watch&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;array&quot;</span><span class="p">,</span>
      <span class="s2">&quot;string&quot;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;watch_options&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;object&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;env&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;object&quot;</span><span class="p">,</span> <span class="s2">&quot;string&quot;</span><span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;^env_\\S*$&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;object&quot;</span><span class="p">,</span>
      <span class="s2">&quot;string&quot;</span>
    <span class="p">]</span>
  <span class="p">},</span>
  <span class="nt">&quot;log_date_format&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;min_uptime&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="p">[</span>
      <span class="s2">&quot;number&quot;</span><span class="p">,</span>
      <span class="s2">&quot;string&quot;</span>
    <span class="p">],</span>
    <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;^\\d+(h|m|s)?$&quot;</span><span class="p">,</span>
    <span class="nt">&quot;desc&quot;</span><span class="p">:</span> <span class="s2">&quot;it should be a NUMBER - milliseconds, \&quot;[NUMBER]h\&quot;(hours), \&quot;[NUMBER]m\&quot;(minutes) or \&quot;[NUMBER]s\&quot;(seconds)&quot;</span><span class="p">,</span>
    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="nt">&quot;ext_type&quot;</span><span class="p">:</span> <span class="s2">&quot;stime&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;max_restarts&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;number&quot;</span><span class="p">,</span>
    <span class="nt">&quot;min&quot;</span><span class="p">:</span> <span class="mi">0</span>
  <span class="p">},</span>
  <span class="nt">&quot;exec_mode&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;regex&quot;</span><span class="p">:</span> <span class="s2">&quot;^(cluster|fork)(_mode)?$&quot;</span><span class="p">,</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;executeCommand&quot;</span><span class="p">,</span>
    <span class="nt">&quot;desc&quot;</span><span class="p">:</span> <span class="s2">&quot;it should be \&quot;cluster\&quot;(\&quot;cluster_mode\&quot;) or \&quot;fork\&quot;(\&quot;fork_mode\&quot;) only&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;exec_interpreter&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;string&quot;</span><span class="p">,</span>
    <span class="nt">&quot;alias&quot;</span><span class="p">:</span> <span class="s2">&quot;interpreter&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;write&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
  <span class="p">},</span>
  <span class="nt">&quot;force&quot;</span><span class="p">:</span> <span class="p">{</span>
    <span class="nt">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;boolean&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3>Considerations</h3>

<ul>
<li>All command line options passed when using the JSON app declaration will be dropped i.e.
```bash
$ cat node-app-1.json</li>
</ul>

<p>{
  &quot;name&quot; : &quot;node-app-1&quot;,
  &quot;script&quot; : &quot;app.js&quot;,
  &quot;cwd&quot; : &quot;/srv/node-app-1/current&quot;
}
```</p>

<ul>
<li>You can start as many JSON app declarations as you want.  Continuing from above:
<code>bash
$ pm2 start node-app-2.json
$ ps aux | grep node-app
root  14735  5.8  1.1  752476  83932 ? Sl 00:08 0:00 pm2: node-app-1
root  24271  0.0  0.3  696428  24208 ? Sl 17:36 0:00 pm2: node-app-2
</code></li>
</ul>

<p>Note that if you execute <code>pm2 start node-app-2</code> again, it will spawn an additional instance node-app-2.</p>

<ul>
<li><p><strong>cwd:</strong> your JSON declaration does not need to reside with your script.  If you wish to maintain the JSON(s) in a location other than your script (say, <code>/etc/pm2/conf.d/node-app.json</code>) you will need to use the <code>cwd</code> feature (Note, this can be really helpful for capistrano style directory structures that uses symlinks). Files can be either relative to the <code>cwd</code> directory, or absolute (see example below).</p></li>
<li><p>All the keys can be used in a JSON configured file, but will remain almost the same on the command line e.g.:</p></li>
</ul>
<div class="highlight"><pre><code class="language-text" data-lang="text">exec_interpreter  -&gt; --interpreter
exec_mode         -&gt; --execute_command
max_restarts      -&gt; --max_restarts
force             -&gt; --force
</code></pre></div>
<p>If the <code>alias</code> exists, you can use it as a CLI option, but do not forget to turn the camelCasing to underscore split <code>executeCommand</code> to <code>--execute_command</code>.</p>

<p><strong>Notes</strong>
- Using quotes to make an ESC, e.g.:</p>
<div class="highlight"><pre><code class="language-text" data-lang="text">  $pm2 start test.js --node-args &quot;port=3001 sitename=&#39;first pm2 app&#39;&quot;
</code></pre></div>
<p>The <code>nodeArgs</code> argument will be parsed as</p>
<div class="highlight"><pre><code class="language-JSON" data-lang="JSON">  <span class="p">[</span>
    <span class="s2">&quot;port=3001&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sitename=first pm2 app&quot;</span>
  <span class="p">]</span>
</code></pre></div>
<p>but not</p>
<div class="highlight"><pre><code class="language-JSON" data-lang="JSON">  <span class="p">[</span>
    <span class="s2">&quot;port=3001&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sitename=&#39;first&quot;</span><span class="p">,</span>
    <span class="s2">&quot;pm2&quot;</span><span class="p">,</span>
    <span class="s2">&quot;app&#39;&quot;</span>
  <span class="p">]</span>
</code></pre></div>
<ul>
<li>RegExp key</li>
</ul>

<p>Matches the keys of configured JSON by RegExp (not by string comparison), e.g. <code>^env_\\S*$</code> will match all <code>env</code> keys like <code>env_production</code>, <code>env_test</code>, and valid them according to the schemas specifications.</p>

<ul>
<li><p>Special <code>ext_type</code></p>

<ul>
<li>min_uptime</li>
</ul>

<p>Value of <code>min_uptime</code> can be:
  - <strong>Number</strong>
    e.g. <code>&quot;min_uptime&quot;: 3000</code> means 3000 milliseconds.
  - <strong>String</strong>
    Therefore, we are making it short and easy to configure: <code>h</code>, <code>m</code> and <code>s</code>, e.g.: <code>&quot;min_uptime&quot;: &quot;1h&quot;</code> means one hour, <code>&quot;min_uptime&quot;: &quot;5m&quot;</code> means five minutes and <code>&quot;min_uptime&quot;: &quot;10s&quot;</code> means ten seconds (those will be transformed into milliseconds).
- max_memory_restart</p>

<p>Value of <code>max_memory_restart</code> can be:
  - <strong>Number</strong>
    e.g. <code>&quot;max_memory_restart&quot;: 1024</code> means 1024 bytes (<strong>NOT BITS</strong>).
  - <strong>String</strong>
    Therefore, we are making it short and easy to configure: <code>G</code>, <code>M</code> and <code>K</code>, e.g.: <code>&quot;max_memory_restart&quot;: &quot;1G&quot;</code> means one gigabytes, <code>&quot;max_memory_restart&quot;: &quot;5M&quot;</code> means five megabytes and <code>&quot;max_memory_restart&quot;: &quot;10K&quot;</code> means ten kilobytes (those will be transformed into byte(s)).</p></li>
<li><p>Optional values</p></li>
</ul>

<p>For example <code>exec_mode</code> can take <code>cluster</code> (<code>cluster_mode</code>) or <code>fork</code> (<code>fork_mode</code>) as possible values.</p>

<ul>
<li><p>Things to know</p>

<ul>
<li>maximum</li>
</ul>

<p><code>&quot;instances&quot;: 0</code> means that we will launch the maximum processes possible according to the numbers of CPUs (cluster mode)
- array</p>

<p><code>args</code>, <code>node_args</code> and <code>ignore_watch</code> could be type of <code>Array</code> (e.g.: <code>&quot;args&quot;: [&quot;--toto=heya coco&quot;, &quot;-d&quot;, &quot;1&quot;]</code>) or <code>string</code> (e.g.: <code>&quot;args&quot;: &quot;--to=&#39;heya coco&#39; -d 1&quot;</code>)</p></li>
</ul>

    </div>

    <div class="col-md-3">
      <div class="sidebar">
        <ul class="nav"></ul>
      </div>
    </div>
  </div>
</div>

<script src="/pm2/scripts/docs.js?t=2015-06-12T11:36:56+02:00"></script>
  </div>
</div>



<footer class="site-footer">

  <div class="wrapper">

    <h2 class="footer-heading">pm2.io</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col  footer-col-1">
        <ul class="contact-list">
          <li>pm2.io</li>
          <li><a href="mailto:your-email@domain.com">your-email@domain.com</a></li>
        </ul>
      </div>

      <div class="footer-col  footer-col-2">
        <ul class="social-media-list">
          
          <li>
            <a href="https://github.com/jekyll">
              <span class="icon  icon--github">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M7.999,0.431c-4.285,0-7.76,3.474-7.76,7.761 c0,3.428,2.223,6.337,5.307,7.363c0.388,0.071,0.53-0.168,0.53-0.374c0-0.184-0.007-0.672-0.01-1.32 c-2.159,0.469-2.614-1.04-2.614-1.04c-0.353-0.896-0.862-1.135-0.862-1.135c-0.705-0.481,0.053-0.472,0.053-0.472 c0.779,0.055,1.189,0.8,1.189,0.8c0.692,1.186,1.816,0.843,2.258,0.645c0.071-0.502,0.271-0.843,0.493-1.037 C4.86,11.425,3.049,10.76,3.049,7.786c0-0.847,0.302-1.54,0.799-2.082C3.768,5.507,3.501,4.718,3.924,3.65 c0,0,0.652-0.209,2.134,0.796C6.677,4.273,7.34,4.187,8,4.184c0.659,0.003,1.323,0.089,1.943,0.261 c1.482-1.004,2.132-0.796,2.132-0.796c0.423,1.068,0.157,1.857,0.077,2.054c0.497,0.542,0.798,1.235,0.798,2.082 c0,2.981-1.814,3.637-3.543,3.829c0.279,0.24,0.527,0.713,0.527,1.437c0,1.037-0.01,1.874-0.01,2.129 c0,0.208,0.14,0.449,0.534,0.373c3.081-1.028,5.302-3.935,5.302-7.362C15.76,3.906,12.285,0.431,7.999,0.431z"/>
                </svg>
              </span>

              <span class="username">jekyll</span>
            </a>
          </li>
          

          
          <li>
            <a href="https://twitter.com/jekyllrb">
              <span class="icon  icon--twitter">
                <svg viewBox="0 0 16 16">
                  <path fill="#828282" d="M15.969,3.058c-0.586,0.26-1.217,0.436-1.878,0.515c0.675-0.405,1.194-1.045,1.438-1.809
                  c-0.632,0.375-1.332,0.647-2.076,0.793c-0.596-0.636-1.446-1.033-2.387-1.033c-1.806,0-3.27,1.464-3.27,3.27 c0,0.256,0.029,0.506,0.085,0.745C5.163,5.404,2.753,4.102,1.14,2.124C0.859,2.607,0.698,3.168,0.698,3.767 c0,1.134,0.577,2.135,1.455,2.722C1.616,6.472,1.112,6.325,0.671,6.08c0,0.014,0,0.027,0,0.041c0,1.584,1.127,2.906,2.623,3.206 C3.02,9.402,2.731,9.442,2.433,9.442c-0.211,0-0.416-0.021-0.615-0.059c0.416,1.299,1.624,2.245,3.055,2.271 c-1.119,0.877-2.529,1.4-4.061,1.4c-0.264,0-0.524-0.015-0.78-0.046c1.447,0.928,3.166,1.469,5.013,1.469 c6.015,0,9.304-4.983,9.304-9.304c0-0.142-0.003-0.283-0.009-0.423C14.976,4.29,15.531,3.714,15.969,3.058z"/>
                </svg>
              </span>

              <span class="username">jekyllrb</span>
            </a>
          </li>
          
        </ul>
      </div>

      <div class="footer-col  footer-col-3">
        <p class="text">Write an awesome description for your new site here. You can edit this line in _config.yml. It will appear in your document head meta (for Google search results) and in your feed.xml site description.
</p>
      </div>
    </div>

  </div>

</footer>


</body>

</html>